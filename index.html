<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lisis de Rendimiento de z/OS Connect | CP vs. zIIP</title>
    
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #0f62fe; /* Azul brillante IBM */
            --secondary-color: #004380; /* Azul oscuro IBM */
            --bg-color: #f7f9fc; /* Fondo gris muy claro */
            --card-bg-color: #ffffff;
            --text-color: #161616;
            --heading-color: #003a70;
            --border-color: #e0e0e0;
            --header-bg: linear-gradient(135deg, #003a70 0%, #00539f 100%);
            --font-primary: 'IBM Plex Sans', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            --font-mono: 'IBM Plex Mono', Consolas, "Liberation Mono", Menlo, Courier, monospace;
        }

        /* --- Reseteo y Estilos Base --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-primary);
            line-height: 1.6;
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        /* --- Contenedor Principal y Layout --- */
        .container {
            max-width: 1320px;
            margin: 30px auto;
            padding: 0 30px;
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 30px;
        }

        /* --- Cabecera --- */
        header {
            grid-column: 1 / -1;
            background: var(--header-bg);
            color: white;
            padding: 3.5rem 3rem;
            text-align: center;
            border-radius: 16px;
            box-shadow: 0 8px 25px rgba(0, 83, 159, 0.2);
        }

        header h1 {
            font-size: 3rem;
            font-weight: 600;
        }

        header p {
            font-size: 1.4rem;
            opacity: 0.9;
            margin-top: 10px;
            font-weight: 300;
        }

        /* --- Navegaci√≥n Lateral --- */
        aside {
            position: sticky;
            top: 30px;
            align-self: start;
        }

        nav {
            background-color: var(--card-bg-color);
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border-color);
        }

        nav h2 {
            margin-top: 0;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            font-size: 1.3rem;
            color: var(--heading-color);
            font-weight: 600;
        }

        nav ul {
            list-style-type: none;
            margin-top: 1rem;
        }

        nav li {
            margin-bottom: 8px;
        }

        nav a {
            text-decoration: none;
            color: var(--primary-color);
            font-weight: 500;
            font-size: 1rem;
            transition: all 0.2s ease-in-out;
            display: block;
            padding: 10px 14px;
            border-radius: 6px;
        }

        nav a:hover,
        nav a:focus {
            color: var(--secondary-color);
            background-color: #f0f4f8;
            transform: translateX(4px);
        }

        /* --- Contenido Principal --- */
        main {
            grid-column: 2 / 3;
        }

        section {
            background-color: var(--card-bg-color);
            padding: 3rem;
            margin-bottom: 30px;
            border-radius: 16px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.06);
            border: 1px solid #e8e8e8;
            scroll-margin-top: 30px;
        }

        /* --- Estilos de Contenido --- */
        h2, h3, h4 {
            color: var(--heading-color);
            font-weight: 600;
            margin-bottom: 1.25rem;
        }

        h2 {
            font-size: 2.2rem;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 10px;
            margin-top: 0;
        }

        h3 {
            font-size: 1.7rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 8px;
            margin-top: 2rem;
        }

        h4 {
            font-size: 1.3rem;
            color: var(--primary-color);
            border: none;
            margin-top: 1.5rem;
        }

        p, li {
            font-size: 1.05rem;
            margin-bottom: 1rem;
        }

        ol, ul {
            padding-left: 20px;
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* Etiqueta <code> */
        code {
            font-family: var(--font-mono);
            background-color: #eef1f5;
            padding: 3px 8px;
            border-radius: 6px;
            font-size: 0.95em;
            color: #393939;
            border: 1px solid #dce1e5;
            /* Forzar el salto de l√≠nea en c√≥digo largo */
            word-break: break-all;
        }

        /* Cita en bloque */
        blockquote {
            border-left: 5px solid var(--primary-color);
            background-color: #f0f4f8;
            padding: 1.5rem 2rem;
            margin: 25px 0;
            font-size: 1.1em;
            font-style: italic;
            border-radius: 0 8px 8px 0;
        }
        
        blockquote strong {
            font-style: normal;
            font-weight: 600;
            color: var(--heading-color);
        }

        /* Tabla */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            font-size: 0.95em;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
            border: 1px solid var(--border-color);
        }

        th, td {
            border-bottom: 1px solid var(--border-color);
            padding: 16px;
            text-align: left;
        }

        th {
            background-color: #f0f4f8;
            font-weight: 600;
            color: var(--heading-color);
            font-size: 1rem;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        tr:last-child td {
            border-bottom: 0;
        }

        tr:hover {
            background-color: #f5f8fc;
        }

        /* --- INICIO: SECCI√ìN 7 CORREGIDA Y ROBUSTA --- */
        .checklist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 2rem;
        }

        .checklist-card {
            background-color: #fcfdff;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.03);
            transition: all 0.2s ease-in-out;
        }

        .checklist-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.07);
        }

        .checklist-card h3 {
            font-size: 1.3rem;
            color: var(--heading-color);
            margin-top: 0;
            margin-bottom: 1.25rem;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
            display: flex;
            align-items: center;
        }
        
        .checklist-card h3 .icon {
            font-size: 1.5rem;
            margin-right: 10px;
        }

        .checklist {
            list-style: none;
            padding-left: 0;
        }
        
        .checklist li {
            font-size: 0.95rem;
            margin-bottom: 12px;
            line-height: 1.5;
        }
        
        /* LA SOLUCI√ìN DEFINITIVA */
        .checklist label {
            display: flex;          /* Usar Flexbox */
            align-items: start;     /* Alinear al inicio (para texto multi-l√≠nea) */
            gap: 12px;              /* Espacio entre la casilla y el texto */
            cursor: pointer;
        }
        
        .checklist input[type="checkbox"] {
            /* Ocultar el checkbox real */
            appearance: none;
            width: 0;
            height: 0;
            margin: 0;
        }

        .checklist label::before {
            /* Crear la casilla personalizada */
            content: '';
            width: 1.1em;
            height: 1.1em;
            border: 2px solid var(--primary-color);
            border-radius: 4px;
            margin-top: 0.2em;      /* Alineaci√≥n vertical */
            flex-shrink: 0;       /* !!! EVITAR QUE SE ENCOJA !!! */
            transition: all 0.2s;
        }

        /* Opcional: estado "checked" (no funcional, solo visual) */
        /*
        .checklist input:checked + label::before {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            content: '\2713';
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        */

        /* CORRECCI√ìN ADICIONAL para <code> dentro de la etiqueta */
        .checklist label code {
            font-size: 0.9em;
            /* No es necesario 'display: inline-block', 
               word-break: break-all lo manejar√° */
        }
        /* --- FIN: SECCI√ìN 7 CORREGIDA Y ROBUSTA --- */


        /* --- Footer --- */
        footer {
            grid-column: 1 / -1;
            text-align: center;
            margin-top: 20px;
            padding: 2.5rem;
            font-size: 0.95em;
            color: #555;
            border-top: 1px solid var(--border-color);
        }

        /* --- Dise√±o Responsivo --- */
        @media (max-width: 1000px) {
            .container {
                grid-template-columns: 1fr;
            }
            aside {
                position: static;
                grid-row: 2;
                margin-top: -10px;
                margin-bottom: 20px;
            }
            main {
                grid-row: 3;
            }
            header {
                padding: 2.5rem 1.5rem;
            }
            header h1 {
                font-size: 2.2rem;
            }
            header p {
                font-size: 1.1rem;
            }
            section {
                padding: 2rem 1.5rem;
            }
            h2 {
                font-size: 1.8rem;
            }
            h3 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>

    <header>
        <h1>Gu√≠a Completa de Rendimiento de z/OS Connect</h1>
        <p>Optimizando la Din√°mica de Procesadores CP y zIIP para Cargas de Trabajo de API</p>
    </header>

    <div class="container">
        <aside>
            <nav>
                <h2>Navegaci√≥n R√°pida</h2>
                <ul>
                    <li><a href="#section-1">1. Arquitectura CPU (CP vs. zIIP)</a></li>
                    <li><a href="#section-2">2. Anatom√≠a de la Carga de Trabajo</a></li>
                    <li><a href="#section-3">3. Impacto de Escasez de CPU</a></li>
                    <li><a href="#section-4">4. Marco de Medici√≥n y An√°lisis</a></li>
                    <li><a href="#section-5">5. Estrategias de Optimizaci√≥n</a></li>
                    <li><a href="#section-6">6. Conclusi√≥n y Hallazgos</a></li>
                    <li><a href="#section-7">7. Lista de Verificaci√≥n</a></li>
                </ul>
            </nav>
        </aside>

        <main>
            <section id="section-1">
                <h2>Secci√≥n 1: Arquitectura Fundamental de CPU (CP vs. zIIP)</h2>
                <p>El entorno de procesamiento en los mainframes IBM Z se basa en una distinci√≥n cr√≠tica entre dos tipos de procesadores. Comprender su interacci√≥n es fundamental para la econom√≠a y el rendimiento de z/OS Connect.</p>

                <h3>Procesadores de Prop√≥sito General (CPs)</h3>
                <p>Los CPs (o GCPs) son los motores de procesamiento primarios del mainframe. Son responsables de ejecutar todas las funciones del sistema operativo, la l√≥gica de las aplicaciones tradicionales (como CICS, IMS, Db2) y la gesti√≥n de todas las operaciones de entrada/salida (I/O). El uso de CP est√° directamente vinculado a la clasificaci√≥n de Millones de Unidades de Servicio (MSU) de la m√°quina, que es la base principal para los costos de licencia de software (MLC).</p>

                <h3>Procesadores de Informaci√≥n Integrada z (zIIPs)</h3>
                <p>Los zIIPs son motores de especialidad dise√±ados para procesar tipos de trabajo espec√≠ficos y "nuevos", como Java y APIs RESTful, de forma as√≠ncrona a los CPs. Su propuesta de valor es principalmente econ√≥mica: el trabajo ejecutado en un zIIP generalmente no contribuye a los cargos de software basados en MSU. Esto permite a las organizaciones modernizar sus aplicaciones sin impactar significativamente sus costos de licenciamiento.</p>
                <p>Una diferencia operativa clave es la velocidad. Los zIIPs siempre operan a la velocidad m√°xima del modelo de procesador, mientras que los CPs en modelos de subcapacidad son ralentizados deliberadamente.</p>

                <h3>El Modelo de Despacho CP-zIIP</h3>
                <p>El trabajo elegible para zIIP no se origina de forma aut√≥noma en el zIIP. Primero debe ser reconocido y despachado por un CP. Un CP siempre est√° involucrado en la iniciaci√≥n de la unidad de trabajo, que luego se transfiere a un zIIP disponible para su ejecuci√≥n. Esta dependencia inicial significa que la disponibilidad y capacidad de respuesta de los CPs son un prerrequisito para la utilizaci√≥n eficiente de los zIIPs.</p>
            </section>

            <section id="section-2">
                <h2>Secci√≥n 2: Anatom√≠a de la Carga de Trabajo de z/OS Connect</h2>
                <p>z/OS Connect est√° construido sobre el perfil WebSphere Liberty y escrito predominantemente en Java. Esta base tecnol√≥gica es la clave de su perfil de rendimiento, ya que la ejecuci√≥n de Java en z/OS es altamente elegible para la descarga a zIIP. IBM declara que m√°s del 99% del c√≥digo del producto z/OS Connect es elegible para ser descargado a procesadores zIIP.</p>
                <p>Sin embargo, una transacci√≥n de API de extremo a extremo no es monol√≠tica. Es una secuencia de tareas distintas, algunas vinculadas a CP y otras elegibles para zIIP.</p>

                <h3>Anatom√≠a de un Flujo de API Provider (Entrante)</h3>
                <p>Este es el ciclo de vida de una solicitud de API que *entra* a z/OS para acceder a un sistema de registro (SoR) como CICS o IMS.</p>
                <ol>
                    <li><strong>Llegada y Despacho Inicial (CP-Bound):</strong> Cada solicitud entrante es manejada inicialmente por un CP (gesti√≥n de pila de red).</li>
                    <li><strong>Evaluaci√≥n de Elegibilidad (CP-Bound):</strong> El despachador de z/OS y WLM determinan si el trabajo puede moverse a un zIIP.</li>
                    <li><strong>Procesamiento Principal (zIIP-Eligible):</strong> Si un zIIP est√° disponible, el trabajo se despacha all√≠. Esto incluye:
                        <ul>
                            <li><strong>Transformaci√≥n de Datos JSON:</strong> El an√°lisis (parsing) de payloads JSON entrantes y la generaci√≥n de JSON saliente es totalmente elegible para zIIP.</li>
                            <li><strong>Seguridad y Criptograf√≠a:</strong> El cifrado/descifrado de red (IPsec) puede ser descargado a zIIPs.</li>
                        </ul>
                    </li>
                    <li><strong>Llamada al Sistema de Registro (SoR) (CP-Bound):</strong> La llamada final al backend (CICS, IMS, Db2) se ejecuta predominantemente en CPs.</li>
                </ol>
                <blockquote>
                    <strong>Punto Cr√≠tico:</strong> El costo total de CPU de una llamada API es la suma de (CPU de z/OS Connect) + (CPU del SoR). Mientras que el primer t√©rmino es altamente elegible para zIIP, el segundo no lo es.
                </blockquote>

                <h3>Anatom√≠a de un Flujo de API Requester (Saliente)</h3>
                <p>Este es el flujo cuando una aplicaci√≥n z/OS (como CICS) llama a z/OS Connect para consumir una API RESTful externa.</p>
                <ol>
                    <li><strong>Llamada de Aplicaci√≥n a z/OS Connect (CP-Bound):</strong> La comunicaci√≥n inicial (ej. WOLA, IPIC) desde la aplicaci√≥n z/OS est√° vinculada a CPs.</li>
                    <li><strong>Procesamiento Pre-Llamada (Mixto):</strong>
                        <ul>
                            <li><strong>Seguridad (CP-Bound):</strong> La validaci√≥n de la identidad (ej. SAF) es intensiva en CP.</li>
                            <li><strong>Transformaci√≥n de Datos (zIIP-Eligible):</strong> Convertir la estructura de datos de COBOL a un payload JSON (marshalling) es una actividad central de Java y altamente elegible para zIIP.</li>
                        </ul>
                    </li>
                    <li><strong>E/S de Red Saliente (CP-Bound):</strong> El establecimiento del socket, el handshake TLS y el env√≠o de la solicitud HTTP son funciones del sistema operativo vinculadas a CPs.</li>
                    <li><strong>Espera de Respuesta:</strong> El hilo espera, consumiendo m√≠nima CPU.</li>
                    <li><strong>Procesamiento Post-Llamada (Mixto):</strong>
                        <ul>
                            <li><strong>Recepci√≥n de Red (CP-Bound):</strong> Recibir la respuesta HTTP est√° vinculado a CPs.</li>
                            <li><strong>Transformaci√≥n de Datos (zIIP-Eligible):</strong> Analizar el JSON de respuesta y transformarlo de nuevo a COBOL (unmarshalling) es altamente elegible para zIIP.</li>
                        </ul>
                    </li>
                    <li><strong>Retorno a la Aplicaci√≥n (CP-Bound):</strong> Devolver los datos a la aplicaci√≥n z/OS llamante est√° vinculado a CPs.</li>
                </ol>
                <blockquote>
                    <strong>Punto Cr√≠tico:</strong> El rendimiento de una llamada de API Requester es una secuencia de tareas. Un cuello de botella en las fases vinculadas a CP (como la E/S de red) puede dominar el tiempo de respuesta total, incluso si la utilizaci√≥n de zIIP es baja.
                </blockquote>
            </section>

            <section id="section-3">
                <h2>Secci√≥n 3: El Impacto de la Escasez de Procesadores</h2>
                <p>La contenci√≥n de procesadores ocurre cuando la demanda de ciclos de CP o zIIP excede la oferta disponible. Esto no es un problema aislado; desencadena una cascada de efectos que degradan el rendimiento.</p>

                <h3>Definici√≥n de Contenci√≥n y Retardo de CP</h3>
                <p>WLM gestiona la contenci√≥n priorizando el trabajo. Cuando una unidad de trabajo est√° lista para ejecutarse pero no hay un CP disponible, incurre en <strong>"Retardo de CPU" (CPU Delay)</strong>. Esta es una m√©trica clave capturada por RMF y es el porcentaje de tiempo que un trabajo estuvo listo pero en cola, esperando un procesador. El Retardo de CP se traduce directamente en tiempos de respuesta aumentados e impredecibles.</p>

                <h3>Escenario 1: Saturaci√≥n de zIIP y el Efecto "Spillover" (Desbordamiento)</h3>
                <p>Los zIIPs son un recurso finito. Cuando todos los zIIPs disponibles est√°n ocupados, el sistema redirige el trabajo elegible para zIIP para que se ejecute en los CPs. Este "desbordamiento" (spillover) tiene graves consecuencias:</p>
                <ul>
                    <li><strong>Aumento de Costos de Software:</strong> El trabajo que estaba destinado a ser "gratuito" (desde la perspectiva de licenciamiento) ahora se ejecuta en CPs facturables, consumiendo MSUs y aumentando los costos de MLC.</li>
                    <li><strong>Aumento de la Contenci√≥n de CP:</strong> Este trabajo de desbordamiento ahora compite directamente con el trabajo cr√≠tico que *debe* ejecutarse en CPs (como CICS, Db2 y la E/S de red).</li>
                    <li><strong>Degradaci√≥n del Rendimiento:</strong> El trabajo desbordado perjudica activamente el rendimiento de toda la LPAR, ralentizando el SoR de backend y exacerbando el problema en un ciclo de retroalimentaci√≥n.</li>
                </ul>

                <h3>Escenario 2: Escasez de CP y el Efecto "Bottleneck" (Cuello de Botella)</h3>
                <p>Un entorno con restricciones de CP es aquel en el que la demanda total de ciclos de CP excede la capacidad. Esto paraliza a z/OS Connect de varias maneras:</p>
                <ul>
                    <li><strong>Retraso en el Manejo Inicial:</strong> El primer paso de recibir una solicitud de la red se retrasa.</li>
                    <li><strong>Llamadas al SoR/Red Congeladas:</strong> Todas las llamadas salientes (al SoR o a la red) deben despacharse en un CP. La escasez significa esperas m√°s largas.</li>
                    <li><strong>Gesti√≥n de JVM Degradada:</strong> La Recolecci√≥n de Basura (Garbage Collection - GC) puede tener componentes que requieren ciclos de CP. Los retrasos aqu√≠ provocan pausas en la aplicaci√≥n.</li>
                </ul>

                <h3>Sintomatolog√≠a y el Ciclo de Retroalimentaci√≥n</h3>
                <p>La escasez de CP crea un ciclo de retroalimentaci√≥n perjudicial, especialmente para los flujos de API Requester:</p>
                <ol>
                    <li>El <strong>Retardo de CP</strong> ralentiza las tareas vinculadas a CP (ej. E/S de red).</li>
                    <li>Esto aumenta la duraci√≥n total de la solicitud, reteniendo las hebras de Liberty por m√°s tiempo.</li>
                    <li>Una mayor ocupaci√≥n de hebras aumenta la concurrencia y la probabilidad de <strong>saturaci√≥n de zIIP</strong>.</li>
                    <li>La saturaci√≥n de zIIP causa <strong>desbordamiento (spillover)</strong> a los CPs.</li>
                    <li>Este desbordamiento <strong>aumenta a√∫n m√°s la contenci√≥n de CP</strong>, regresando al paso 1 con un retardo a√∫n peor.</li>
                </ol>
            </section>

            <section id="section-4">
                <h2>Secci√≥n 4: Marco de Medici√≥n y An√°lisis</h2>
                <p>Para diagnosticar estos problemas, es indispensable un enfoque de monitoreo de m√∫ltiples capas, correlacionando datos del sistema (RMF) con datos de la aplicaci√≥n (SMF 123).</p>

                <h3>Capa 1: An√°lisis a Nivel de LPAR (RMF/SMF Tipo 70)</h3>
                <p>Proporciona una visi√≥n de alto nivel de la salud general de los procesadores de la LPAR.</p>
                <ul>
                    <li><strong>Informe Clave:</strong> Informe de Actividad de CPU de RMF (SMF Tipo 70, Subtipo 1).</li>
                    <li><strong>M√©tricas a Analizar:</strong> Ocupaci√≥n de CP y zIIP del LPAR.</li>
                </ul>

                <h3>Capa 2: An√°lisis Granular de Carga de Trabajo (RMF/SMF Tipo 72)</h3>
                <p>Este es el informe m√°s cr√≠tico para entender la efectividad de la descarga a zIIP y medir la contenci√≥n a nivel de la clase de servicio de z/OS Connect.</p>
                <ul>
                    <li><strong>Informe Clave:</strong> Informe de Actividad de la Carga de Trabajo de RMF (WLMGL) (SMF Tipo 72, Subtipo 3).</li>
                    <li><strong>M√©tricas Clave a Analizar:</strong>
                        <table>
                            <thead>
                                <tr>
                                    <th>M√©trica</th>
                                    <th>Campo SMF 72-3</th>
                                    <th>Descripci√≥n</th>
                                    <th>Qu√© Buscar (Interpretaci√≥n)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>APPL% -> IIP</code></td>
                                    <td>-</td>
                                    <td>Porcentaje de tiempo de CPU que se ejecut√≥ con √©xito en un zIIP.</td>
                                    <td>Mide la descarga exitosa. Un valor alto es deseable.</td>
                                </tr>
                                <tr>
                                    <td><strong><code>APPL% -> IIPCP</code></strong></td>
                                    <td><code>R723SUCU</code></td>
                                    <td>Porcentaje de tiempo de CPU que era <strong>elegible para zIIP</strong> pero se vio forzado a ejecutarse en un CP.</td>
                                    <td><strong>La m√©trica m√°s importante para la saturaci√≥n de zIIP</strong>. Un valor > 0 es un indicador de cuello de botella de zIIP.</td>
                                </tr>
                                 <tr>
                                    <td><strong><code>CPU DLY %</code></strong></td>
                                    <td><code>R723CADL</code></td>
                                    <td>Porcentaje de tiempo que la carga de trabajo estuvo lista para ejecutarse pero estaba esperando un CP.</td>
                                    <td><strong>La medida directa del retardo de CP</strong>. Causa ra√≠z del aumento del tiempo de respuesta.</td>
                                </tr>
                                <tr>
                                    <td><code>VELOCITY</code></td>
                                    <td>-</td>
                                    <td>Indicador de si la carga de trabajo est√° cumpliendo sus objetivos de WLM.</td>
                                    <td>Una velocidad por debajo del objetivo indica que la carga de trabajo est√° siendo retrasada.</td>
                                </tr>
                            </tbody>
                        </table>
                    </li>
                </ul>

                <h3>Capa 3: Diagn√≥stico en Tiempo Real (RMF III / OMEGAMON)</h3>
                <p>Estas herramientas son cruciales para diagnosticar problemas activos.</p>
                <ul>
                    <li><strong>OMEGAMON for JVM:</strong> Muestra el desglose en tiempo real entre tiempo de CP, tiempo de zIIP y, crucialmente, el trabajo elegible para zIIP que se ejecuta en CPs (el equivalente en tiempo real de <code>IIPCP</code>).</li>
                    <li><strong>Alertas (Situaciones):</strong> Se deben configurar alertas proactivas:
                        <ul>
                            <li><strong>Advertencia:</strong> <code>% zIIP en CP</code> > 10% sostenido.</li>
                            <li><strong>Cr√≠tico:</strong> <code>% zIIP en CP</code> > 50%.</li>
                            <li><strong>Cr√≠tico:</strong> Tiempo de Respuesta Promedio > 2x la l√≠nea base.</li>
                        </ul>
                    </li>
                </ul>

                <h3>Capa 4: An√°lisis de Solicitudes de Extremo a Extremo (SMF Tipo 123)</h3>
                <p>Este registro es generado por el propio z/OS Connect y es la fuente definitiva para el tiempo de respuesta de las solicitudes individuales. Es crucial habilitar los registros V2 (<code>apiRequesterSmfVersion="2"</code>) para flujos de Requester.</p>
                <blockquote>
                    <strong>Metodolog√≠a de Correlaci√≥n:</strong> La clave es correlacionar los tiempos. Si el <strong>"Tiempo de procesamiento en z/OS Connect"</strong> (calculado desde SMF 123) aumenta en el mismo intervalo de tiempo en que <code>CPU DLY %</code> o <code>IIPCP %</code> (de RMF 72) son altos, se ha encontrado la causa ra√≠z.
                </blockquote>
            </section>

            <section id="section-5">
                <h2>Secci√≥n 5: Estrategias Proactivas de Ajuste y Optimizaci√≥n</h2>
                <p>El diagn√≥stico debe ir seguido de acciones correctivas. Estas estrategias ayudan a prevenir la contenci√≥n y asegurar un rendimiento √≥ptimo.</p>

                <h3>1. Configuraci√≥n Estrat√©gica de WLM</h3>
                <p>Una configuraci√≥n adecuada de WLM es la primera l√≠nea de defensa.</p>
                <ul>
                    <li><strong>Clasificaci√≥n:</strong> Es fundamental habilitar <code>zosWlm-1.0</code> en <code>server.xml</code> y usar reglas de <code>httpClassification</code> para asignar la STC del servidor y los enclaves de solicitud (tipo CB) a clases de servicio separadas.</li>
                    <li><strong>Objetivos:</strong> Usar objetivos de velocidad (Velocity) de m√∫ltiples per√≠odos para las solicitudes, no discrecionales.</li>
                    <li><strong>Niveles de Importancia (Provider):</strong> El SoR de backend (ej. CICS) debe tener una importancia <strong>m√°s alta</strong> que el servidor z/OS Connect.</li>
                    <li><strong>Niveles de Importancia (Requester):</strong> El servidor z/OS Connect debe tener una importancia <strong>m√°s alta</strong> que la aplicaci√≥n que lo llama.</li>
                    <li><strong>Par√°metro <code>IIPHONORPRIORITY</code>:</strong> (Predeterminado YES). Permite que el trabajo de zIIP desbordado compita por CPs seg√∫n su prioridad de WLM. Cambiarlo a NO es una opci√≥n de ajuste avanzada para preservar los CPs.</li>
                </ul>

                <h3>2. Ajuste del Subsistema z/OS y TCP/IP (Enfoque Requester)</h3>
                <p>Dado que los flujos de solicitante son intensivos en red, optimizar TCP/IP puede reducir significativamente el consumo de CP y la latencia.</p>
                <ul>
                    <li><strong>Habilitar AsyncIO:</strong> Permite a Liberty un manejo de sockets m√°s eficiente.</li>
                    <li><strong>Ajuste del Perfil de TCP/IP:</strong>
                        <ul>
                            <li><code>TCPCONFIG DELAYACKS</code>: Reduce la cantidad de paquetes y el consumo de CPU.</li>
                            <li><strong>Checksum Offload:</strong> Descarga los c√°lculos de suma de comprobaci√≥n a las tarjetas de red OSA-Express.</li>
                            <li><strong>Tama√±os de B√∫fer:</strong> Asegurar tama√±os adecuados (ej. >= 64KB) para <code>DefaultSendBufferSize</code> y <code>DefaultReceiveBufferSize</code>.</li>
                        </ul>
                    </li>
                </ul>

                <h3>3. Optimizaci√≥n a Nivel de Aplicaci√≥n (Reducci√≥n de Payloads)</h3>
                <p>Reducir la demanda de CPU en la fuente es la forma m√°s eficiente de optimizaci√≥n.</p>
                <ul>
                    <li><strong>Excluir Campos No Utilizados:</strong> Mapear solo los campos absolutamente necesarios. Excluir campos no utilizados reduce dr√°sticamente el tama√±o del payload y el consumo de CPU.</li>
                    <li><strong>Usar <code>OCCURS DEPENDING ON</code> (ODO):</strong> Para arrays de COBOL, usar ODO en lugar de arrays de tama√±o fijo permite payloads de tama√±o variable.</li>
                </ul>

                <h3>4. Planificaci√≥n Proactiva de la Capacidad</h3>
                <p>Las m√©tricas <code>% CPU DLY</code> y <code>% IIPCP</code> deben guiar la toma de decisiones:</p>
                <ul>
                    <li><strong><code>% CPU DLY</code> alto, <code>% IIPCP</code> bajo:</strong> Cuello de botella cl√°sico de CP. Soluci√≥n: a√±adir CPs.</li>
                    <li><strong><code>% CPU DLY</code> bajo, <code>% IIPCP</code> alto:</strong> Cuello de botella cl√°sico de zIIP. Soluci√≥n: a√±adir zIIPs.</li>
                    <li><strong><code>% CPU DLY</code> alto, <code>% IIPCP</code> alto:</strong> Sistema completamente saturado. Se requieren ambos, CPs y zIIPs.</li>
                    <li><strong><code>% CPU DLY</code> bajo, <code>% IIPCP</code> bajo:</strong> El problema de rendimiento no est√° relacionado con la contenci√≥n de procesadores en z/OS. Investigar la latencia de la red o el endpoint remoto.</li>
                </ul>
            </section>

            <section id="section-6">
                <h2>Secci√≥n 6: Conclusi√≥n y Resumen de Hallazgos</h2>
                <p>El rendimiento de z/OS Connect est√° intr√≠nsecamente ligado a la gesti√≥n eficaz de los procesadores CP y zIIP. La arquitectura ofrece un enorme potencial para procesar cargas de trabajo de modernizaci√≥n de manera rentable. Sin embargo, este modelo introduce un riesgo cr√≠tico: la saturaci√≥n de los procesadores zIIP y la contenci√≥n de los CPs.</p>
                <p>El an√°lisis ha demostrado que la carga de trabajo de z/OS Connect es una amalgama de tareas vinculadas a CP (E/S de red, seguridad) y tareas elegibles para zIIP (transformaci√≥n JSON). La escasez en cualquiera de los procesadores crea un efecto domin√≥:</p>
                <ul>
                    <li>La <strong>escasez de CP</strong> retrasa las tareas de red y seguridad, aumentando el tiempo total de la solicitud.</li>
                    <li>Esto aumenta la concurrencia, lo que lleva a la <strong>saturaci√≥n de zIIP</strong>.</li>
                    <li>La saturaci√≥n de zIIP causa un <strong>desbordamiento (spillover)</strong> de trabajo Java hacia los CPs.</li>
                    <li>Este desbordamiento <strong>exacerba la contenci√≥n de CP</strong>, degradando el rendimiento de todo el sistema y aumentando los costos de licenciamiento.</li>
                </ul>
                <p>La clave del √©xito reside en una gesti√≥n proactiva y basada en datos. Es imperativo implementar un marco de monitoreo que correlacione los datos de RMF (SMF 70 y 72) con los registros de aplicaci√≥n (SMF 123). La m√©trica <code>IIPCP</code> (o <code>% zIIP en CP</code>) emerge como el indicador principal m√°s crucial de la inminente saturaci√≥n de zIIP.</p>
            </section>

            <section id="section-7">
                <h2>Secci√≥n 7: Lista de Verificaci√≥n Accionable</h2>
                <p>Utilice esta lista de verificaci√≥n como gu√≠a estrat√©gica para la gesti√≥n proactiva del rendimiento de z/OS Connect.</p>
                
                <div class="checklist-grid">
                    
                    <div class="checklist-card">
                        <h3><span class="icon">üîç</span> VALIDAR</h3>
                        <ul class="checklist">
                            <li><label><input type="checkbox"> Confirmar que <code>zosWlm-1.0</code> est√° activa en server.xml.</label></li>
                            <li><label><input type="checkbox"> Asegurar que existan reglas de <code>httpClassification</code> para las cargas de trabajo.</label></li>
                            <li><label><input type="checkbox"> Verificar que la pol√≠tica de WLM clasifica correctamente la STC y los enclaves (CB) en clases de servicio apropiadas (usar objetivos de velocidad).</label></li>
                            <li><label><input type="checkbox"> Verificar que la importancia del SoR (CICS/IMS) es <strong>mayor</strong> que la de z/OS Connect (para flujos de Provider).</label></li>
                        </ul>
                    </div>
            
                    <div class="checklist-card">
                        <h3><span class="icon">üìè</span> MEDIR</h3>
                        <ul class="checklist">
                            <li><label><input type="checkbox"> Habilitar registros SMF 123 (V2 para Requester: <code>apiRequesterSmfVersion="2"</code>).</label></li>
                            <li><label><input type="checkbox"> Recopilar y archivar regularmente datos de RMF (SMF 70, 72) y SMF 123.</label></li>
                            <li><label><input type="checkbox"> Establecer l√≠neas base para <code>Tiempo en z/OS Connect</code>, <code>% CPU DLY</code> y <code>% IIPCP</code> durante picos.</label></li>
                        </ul>
                    </div>
                    
                    <div class="checklist-card">
                        <h3><span class="icon">üñ•Ô∏è</span> MONITORIZAR</h3>
                        <ul class="checklist">
                            <li><label><input type="checkbox"> Utilizar un monitor en tiempo real (RMF III, OMEGAMON for JVM).</label></li>
                            <li><label><input type="checkbox"> Configurar alertas para <code>% zIIP en CP</code> (Advertencia > 10%, Cr√≠tico > 50%).</label></li>
                            <li><label><input type="checkbox"> Configurar alertas para Tiempo de Respuesta (Cr√≠tico > 2x la l√≠nea base).</label></li>
                            <li><label><input type="checkbox"> Configurar alertas para Recuento de Hebras Activas (Advertencia > 80% del m√°ximo).</label></li>
                        </ul>
                    </div>
            
                    <div class="checklist-card">
                        <h3><span class="icon">ü©∫</span> DIAGNOSTICAR</h3>
                        <ul class="checklist">
                            <li><label><input type="checkbox"> Correlacionar <code>Tiempo en z/OS Connect</code> (SMF 123) con <code>% CPU DLY</code> y <code>% IIPCP</code> (RMF 72).</label></li>
                            <li><label><input type="checkbox"> Usar la "Matriz de Contenci√≥n" (Secci√≥n 5) para identificar el cuello de botella (CP, zIIP, ambos).</label></li>
                        </ul>
                    </div>
            
                    <div class="checklist-card">
                        <h3><span class="icon">üõ†Ô∏è</span> AJUSTAR</h3>
                        <ul class="checklist">
                            <li><label><input type="checkbox"> Revisar y optimizar la pol√≠tica de WLM (ver "VALIDAR").</label></li>
                            <li><label><input type="checkbox"> (Para Requester) Habilitar <code>AsyncIO</code> para Liberty.</label></li>
                            <li><label><input type="checkbox"> (Para Requester) Revisar par√°metros de TCP/IP (<code>DELAYACKS</code>, B√∫feres).</label></li>
                            <li><label><input type="checkbox"> (Para Provider) Optimizar payloads de API (excluir campos, usar ODO).</label></li>
                        </ul>
                    </div>
            
                    <div class="checklist-card">
                        <h3><span class="icon">üìà</span> PLANIFICAR</h3>
                        <ul class="checklist">
                            <li><label><input type="checkbox"> Usar tendencias hist√≥ricas de <code>% IIPCP</code> para pronosticar necesidades de zIIP.</label></li>
                            <li><label><input type="checkbox"> Usar tendencias de <code>% CPU DLY</code> para evaluar la capacidad de CP.</label></li>
                            <li><label><input type="checkbox"> Traducir <code>% IIPCP</code> en impacto de costo de MLC para justificar la adquisici√≥n de hardware.</label></li>
                        </ul>
                    </div>
            
                </div>
            </section>
            </main>
    </div>

    <footer>
        <p>Este documento es una s√≠ntesis de los materiales proporcionados sobre el rendimiento de z/OS Connect. El contenido se basa en la informaci√≥n de los documentos originales.</p>
    </footer>

</body>
</html>
